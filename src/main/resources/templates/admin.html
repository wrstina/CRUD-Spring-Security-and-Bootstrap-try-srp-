<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>Админ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="api-base" content="">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Палитра */
        :root{
            --rose-50:#fff6fa;
            --rose-100:#ffeaf3;
            --rose-200:#ffd6e8;
            --rose-300:#ffbfdc;
            --rose-400:#ffa5cf;
            --rose-500:#ff86c0;
            --rose-600:#ff6fb3;
            --rose-700:#f05ca2;

            /* фон */
            --bg-url: url("https://www.digiseller.ru/preview/1131991/p1_3823891_3e694b1c.jpg");

            /* Цвета текста на «стекле» */
            --text-on-glass:#fff5fa;          /* почти белый с лёгким розовым */
            --head-on-glass:#ffffff;          /* чисто белый для заголовков */
        }

        body{ color:#1f2937; }
        .navbar{ background:linear-gradient(180deg, var(--rose-50), #fff); }
        .navbar .btn{ border-radius: 999px; }

        h5{
            font-weight:800;
            color: var(--head-on-glass);
            text-shadow: 0 2px 10px rgba(0,0,0,.55);
        }

        /* Кнопки */
        .btn-rose{
            color:#fff;
            background:var(--rose-500);
            border-color:var(--rose-500);
        }
        .btn-rose:hover{ background:var(--rose-600); border-color:var(--rose-600); }
        .btn-rose:focus{ box-shadow:0 0 0 .2rem rgba(255,134,192,.25); }

        .btn-rose-outline{
            color:var(--rose-600);
            border-color:var(--rose-500);
            background:transparent;
        }
        .btn-rose-outline:hover{
            color:#fff;
            background:var(--rose-500);
            border-color:var(--rose-500);
        }

        .actions{ display:flex; justify-content:flex-end; gap:.5rem; }
        .actions .btn{ min-width:110px; padding:.35rem .75rem; }

        #banner{ border-radius:12px; }

        /* === фон и «стеклянная» таблица с повышенным контрастом === */
        html, body { height: 100%; }
        body{
            background: var(--bg-url) no-repeat center center fixed;
            background-size: cover;
        }

        .table-responsive{
            position: relative;
            border-radius: 16px;
            padding: .75rem;
            border: 1px solid rgba(255,255,255,0.25);
            box-shadow: 0 10px 24px rgba(0,0,0,0.18);
            /* лёгкий блюр сквозь стекло */
            backdrop-filter: blur(1.5px);
            -webkit-backdrop-filter: blur(1.5px);
        }
        /* тёмное «дымчатое» стекло под содержимым — добавляет контраст */
        .table-responsive::before{
            content:"";
            position:absolute; inset:0;
            background: rgba(12, 8, 18, 0.42);   /* тёмный полупрозрачный слой */
            border-radius: inherit;
            z-index:0;
        }
        .table-responsive > *{ position: relative; z-index:1; }

        /* Таблица прозрачная — только текст/границы */
        .table,
        .table tbody,
        .table thead,
        .table tfoot { background: transparent !important; }

        .table>:not(caption)>*>*{
            background-color: transparent !important;
            color: var(--text-on-glass) !important;
            font-weight: 600;
            text-shadow: 0 2px 8px rgba(0,0,0,.75);   /* сильнее тень для читаемости */
        }

        .table thead th{
            color: var(--head-on-glass) !important;
            background: rgba(255,234,243,0.18);
            border-bottom: 2px solid rgba(248,217,232,0.55);
            text-shadow: 0 2px 8px rgba(0,0,0,.75);
        }

        .table tr{ border-color: rgba(255,182,215,0.45); }

        .table-hover tbody tr:hover{
            background: rgba(255,246,250,0.12);
        }

        /* Кнопки действий в таблице: «Изменить» и «Удалить» — розовые */
        .actions .btn:first-child{                /* Изменить */
            color:#fff !important;
            background: var(--rose-600) !important;
            border-color: var(--rose-600) !important;
            text-shadow: none;
        }
        .actions .btn:first-child:hover{
            background:#ff5fa9 !important;
            border-color:#ff5fa9 !important;
        }
        .actions .btn:last-child{                 /* Удалить */
            color:#fff !important;
            background: #ff5a9e !important;
            border-color: #ff5a9e !important;
            text-shadow: none;
        }
        .actions .btn:last-child:hover{
            background:#f64993 !important;
            border-color:#f64993 !important;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-light bg-light border-bottom">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Админ</span>
        <form action="/logout" method="post" class="m-0">
            <button type="submit" class="btn btn-rose">Выйти</button>
        </form>
    </div>
</nav>

<div class="container py-4">
    <div id="banner" class="alert d-none" role="alert"></div>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="m-0">Пользователи</h5>
        <button id="btnOpenCreate" class="btn btn-rose">Добавить</button>
    </div>

    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-light">
            <tr>
                <th style="width:70px;">ID</th>
                <th>Username</th>
                <th>Email</th>
                <th style="width:100px;">Age</th>
                <th style="width:220px;">Roles</th>
                <th style="width:240px;" class="text-end">Действия</th>
            </tr>
            </thead>
            <tbody id="usersTbody"></tbody>
        </table>
    </div>
</div>

<!-- Modal Add/Edit -->
<div class="modal fade" id="userModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <form id="userForm" novalidate>
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalTitle">Добавить пользователя</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="userId">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Username</label>
                            <input id="username" name="username" class="form-control" required>
                            <div class="invalid-feedback" data-for="username"></div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Email</label>
                            <input id="email" name="email" type="email" class="form-control" required>
                            <div class="invalid-feedback" data-for="email"></div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Password
                                <small class="text-muted" id="pwdNote">(оставь пустым — без изменений)</small>
                            </label>
                            <input id="password" name="password" type="password" class="form-control">
                            <div class="invalid-feedback" data-for="password"></div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Age</label>
                            <input id="age" name="age" type="number" min="0" class="form-control" required>
                            <div class="invalid-feedback" data-for="age"></div>
                        </div>
                        <div class="col-12">
                            <label class="form-label d-block mb-1">Роли</label>
                            <div id="rolesBox" class="d-flex flex-wrap gap-3"></div>
                            <div class="invalid-feedback d-block" data-for="roles"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-rose-outline" type="button" data-bs-dismiss="modal">Отмена</button>
                    <button id="submitUser" type="submit" class="btn btn-rose">Сохранить</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal Delete -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <form id="deleteForm">
                <div class="modal-header">
                    <h5 class="modal-title">Удаление</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="deleteUserId">
                    Удалить пользователя <b id="deleteUserName"></b>?
                </div>
                <div class="modal-footer">
                    <button class="btn btn-rose-outline" type="button" data-bs-dismiss="modal">Отмена</button>
                    <button class="btn btn-rose" type="submit">Удалить</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script defer src="/js/admin.js"></script>
</body>
</html>






